<view class="container">
  <!-- é¡µé¢æ ‡é¢˜ -->
  <view class="tab-page-title">JEè°±åº“å¤æ´»èµ›</view>
  
  <!-- å¾ªç¯å¹¿å‘Šæ  -->
  <view class="banner-container">
    <swiper class="banner-swiper" indicator-dots="{{true}}" autoplay="{{true}}" interval="{{3000}}" duration="{{500}}" circular="{{true}}">
      <swiper-item wx:for="{{bannerList}}" wx:key="id" bindtap="onBannerTap" data-item="{{item}}">
        <view class="banner-item" style="background: {{item.bgColor}};">
          <view class="banner-content">
            <view class="banner-title">{{item.title}}</view>
            <view class="banner-desc">{{item.description}}</view>
          </view>
          <view class="banner-icon">{{item.icon}}</view>
        </view>
      </swiper-item>
    </swiper>
  </view>

  <!-- æœç´¢åŒºåŸŸ -->
  <view class="search-container">
    <!-- æœç´¢ç±»å‹é€‰æ‹© -->
    <view class="search-type-tabs">
      <view class="search-tab {{searchType === 'title' ? 'active' : ''}}" bindtap="onSearchTypeChange" data-type="title">æ ‡é¢˜</view>
      <view class="search-tab {{searchType === 'author' ? 'active' : ''}}" bindtap="onSearchTypeChange" data-type="author">ä½œè€…</view>
      <view class="search-tab {{searchType === 'album' ? 'active' : ''}}" bindtap="onSearchTypeChange" data-type="album">ä¸“è¾‘</view>
      <view class="search-tab {{searchType === 'uploader' ? 'active' : ''}}" bindtap="onSearchTypeChange" data-type="uploader">ä¸Šä¼ è€…</view>
    </view>
    
    <!-- æœç´¢è¾“å…¥æ¡† -->
    <view class="search-input-container">
      <input class="search-input" placeholder="{{searchPlaceholder}}" value="{{searchKeyword}}" bindinput="onSearchInput" bindconfirm="onSearch" />
      <view class="search-btn" bindtap="onSearch">
        <text class="search-icon">ğŸ”</text>
      </view>
    </view>
  </view>

  <!-- ä¹è°±åˆ—è¡¨ -->
  <view class="scores-container">
    <!-- åŠ è½½çŠ¶æ€ -->
    <view class="loading-container" wx:if="{{loading}}">
      <view class="loading-spinner"></view>
      <text>åŠ è½½ä¸­...</text>
    </view>
    
    <!-- ç©ºçŠ¶æ€ -->
    <view class="empty-container" wx:elif="{{filteredScores.length === 0 && !loading}}">
      <view class="empty-icon">ğŸ“</view>
      <view class="empty-text">{{searchKeyword ? 'æ²¡æœ‰æ‰¾åˆ°ç›¸å…³ä¹è°±' : 'æš‚æ— ä¹è°±'}}</view>
    </view>
    
    <!-- ä¹è°±åˆ—è¡¨ -->
    <view class="scores-list" wx:else>
      <view class="score-item" wx:for="{{filteredScores}}" wx:key="id" bindtap="onScoreItemTap" data-score="{{item}}">
        <view class="score-main">
          <view class="score-title">{{item.Title || 'æœªå‘½åä¹è°±'}}</view>
          <view class="score-info">
            <text class="score-author">ä½œè€…: 
              <block wx:if="{{item.Author && item.Author.length > 0}}">
                <text wx:for="{{item.Author}}" wx:key="*this" wx:for-item="author">{{author}}{{index < item.Author.length - 1 ? 'ã€' : ''}}</text>
              </block>
              <text wx:else>æœªçŸ¥</text>
            </text>
            <text class="score-album" wx:if="{{item.Album}}">ä¸“è¾‘: {{item.Album}}</text>
          </view>
          <view class="score-meta">
            <text class="score-uploader" wx:if="{{item.uploader}}">ä¸Šä¼ è€…: {{item.uploader}}</text>
            <text class="score-date" wx:if="{{item.uploadDate}}">{{item.uploadDate}}</text>
            <text class="score-type">{{item.type === 'je' ? 'JEè°±' : 'ä¹è°±æ–‡ä»¶'}}</text>
          </view>
        </view>
        <view class="score-arrow">â€º</view>
      </view>
    </view>
  </view>
</view>
